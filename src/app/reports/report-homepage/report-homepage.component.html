<app-header></app-header>

<mat-tab-group mat-align-tabs="start" (selectedTabChange)='onSelectChange($event)'>
    <mat-tab label="Weekly">
        <div class="tab-cotainer" fxLayout="column" fxLayoutAlign="center center">
            <form class="year-input-container" [formGroup]="weeklyForm" (ngSubmit)="getWeeklyReport()"
            fxLayout="row" fxLayoutAlign="center center">
                <h2>Get weekly report by inserting the year and month: </h2>
                <mat-form-field appearance="fill" id="year-input">
                    <mat-label>Year</mat-label>
                    <input 
                    matInput type="number" 
                    formControlName="year"
                    />
                    <mat-error *ngIf="weeklyForm.invalid">{{ validator.validateNumberRange('year', minYear, maxYear) }}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Month</mat-label>
                    <input 
                    matInput type="number" 
                    formControlName="month"
                    />
                    <mat-error *ngIf="weeklyForm.invalid">{{ validator.validateNumberRange('month', minMonth, maxMonth) }}</mat-error>
                </mat-form-field>
                <button mat-flat-button color="primary" type="submit"></button>
            </form>
            <div class="chart-space">
                <mat-form-field appearance="fill">
                    <mat-label>Type of chart</mat-label>
                    <mat-select [(ngModel)]="selectedChart">
                        <mat-option value="bar">Bar chart</mat-option>
                        <mat-option value="line">Line chart</mat-option>
                    </mat-select>
                </mat-form-field>
                <app-bar-chart *ngIf="this.selectedChart === 'bar'" #targetChartBarW [reportInfoItems]="weeklyReport" [chartTitle]="'Weekly report based on income and outcome'"></app-bar-chart>
                <app-line-chart *ngIf="this.selectedChart === 'line'" #targetChartLineW [reportInfoItems]="weeklyReport" [chartTitle]="'Weekly report based on income and outcome'"></app-line-chart>
            </div>
        </div>
    </mat-tab>
    <mat-tab label="Monthly">
        <div class="tab-cotainer" fxLayout="column" fxLayoutAlign="center center">
            <form class="year-input-container" [formGroup]="monthlyForm" (ngSubmit)="getMonthlyReport()"
            fxLayout="row" fxLayoutAlign="center center">
                <h2>Get monthly report by inserting the year: </h2>
                <mat-form-field appearance="fill" id="year-input">
                    <mat-label>Year</mat-label>
                    <input 
                    matInput type="number" 
                    formControlName="year"
                    />
                    <mat-error *ngIf="monthlyForm.invalid">{{ validator.validateNumberRange('year', minYear, maxYear) }}</mat-error>
                </mat-form-field>
                <button mat-flat-button color="primary" type="submit"></button>
            </form>
            <div class="chart-space">
                <mat-form-field appearance="fill">
                    <mat-label>Type of chart</mat-label>
                    <mat-select [(ngModel)]="selectedChart">
                        <mat-option value="bar">Bar chart</mat-option>
                        <mat-option value="line">Line chart</mat-option>
                    </mat-select>
                </mat-form-field>
                <app-bar-chart *ngIf="this.selectedChart === 'bar'" #targetChartBarM [reportInfoItems]="monthlyReport" [chartTitle]="'Monthly report based on income and outcome'"></app-bar-chart>
                <app-line-chart *ngIf="this.selectedChart === 'line'" #targetChartLineM [reportInfoItems]="monthlyReport" [chartTitle]="'Monthly report based on income and outcome'"></app-line-chart>
            </div>
        </div>
    </mat-tab>
    <mat-tab label="Quarterly">
        <div class="tab-cotainer" fxLayout="column" fxLayoutAlign="center center">
            <form class="year-input-container" [formGroup]="quarterlyForm" (ngSubmit)="getQuarterlyReport()"
            fxLayout="row" fxLayoutAlign="center center">
                <h2>Get quarterely report by inserting the year: </h2>
                <mat-form-field appearance="fill" id="year-input">
                    <mat-label>Year</mat-label>
                    <input 
                    matInput type="number" 
                    formControlName="year"
                    />
                    <mat-error *ngIf="quarterlyForm.invalid">{{ validator.validateNumberRange('year', minYear, maxYear) }}</mat-error>
                </mat-form-field>
                <button mat-flat-button color="primary" type="submit"></button>
            </form>
            <div class="chart-space">
                <mat-form-field appearance="fill">
                    <mat-label>Type of chart</mat-label>
                    <mat-select [(ngModel)]="selectedChart">
                        <mat-option value="bar">Bar chart</mat-option>
                        <mat-option value="line">Line chart</mat-option>
                    </mat-select>
                </mat-form-field>
                <app-bar-chart *ngIf="this.selectedChart === 'bar'" #targetChartBarQ [reportInfoItems]="quarterlyReport" [chartTitle]="'Quarterly report based on income and outcome'"></app-bar-chart>
                <app-line-chart *ngIf="this.selectedChart === 'line'" #targetChartLineQ [reportInfoItems]="quarterlyReport" [chartTitle]="'Quarterly report based on income and outcome'"></app-line-chart>
            </div>
        </div>
    </mat-tab>
  </mat-tab-group>

